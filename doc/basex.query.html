<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>basex.query documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Basex 0.0.1 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>basex</span></div></div></li><li class="depth-2 branch current"><a href="basex.query.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>query</span></div></a></li><li class="depth-2"><a href="basex.session.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>session</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="basex.query.html#var-bind"><div class="inner"><span>bind</span></div></a></li><li class="depth-1"><a href="basex.query.html#var-close"><div class="inner"><span>close</span></div></a></li><li class="depth-1"><a href="basex.query.html#var-context"><div class="inner"><span>context</span></div></a></li><li class="depth-1"><a href="basex.query.html#var-create-query"><div class="inner"><span>create-query</span></div></a></li><li class="depth-1"><a href="basex.query.html#var-execute"><div class="inner"><span>execute</span></div></a></li><li class="depth-1"><a href="basex.query.html#var-info"><div class="inner"><span>info</span></div></a></li><li class="depth-1"><a href="basex.query.html#var-more.3F"><div class="inner"><span>more?</span></div></a></li><li class="depth-1"><a href="basex.query.html#var-next"><div class="inner"><span>next</span></div></a></li><li class="depth-1"><a href="basex.query.html#var-options"><div class="inner"><span>options</span></div></a></li><li class="depth-1"><a href="basex.query.html#var-results"><div class="inner"><span>results</span></div></a></li><li class="depth-1"><a href="basex.query.html#var-with-query"><div class="inner"><span>with-query</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">basex.query</h2><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-bind"><h3>bind</h3><div class="usage"><code>(bind query name value)</code><code>(bind query name value type)</code></div><div class="doc"><pre class="plaintext">Bind a particular value (and optionally a type) to a named variable in the 
context of the query</pre></div></div><div class="public anchor" id="var-close"><h3>close</h3><div class="usage"><code>(close query)</code></div><div class="doc"><pre class="plaintext">Closes and unregisters the query
</pre></div></div><div class="public anchor" id="var-context"><h3>context</h3><div class="usage"><code>(context query value)</code><code>(context query value type)</code></div><div class="doc"><pre class="plaintext">Bind a value (and optionally type) to the global context of the query
</pre></div></div><div class="public anchor" id="var-create-query"><h3>create-query</h3><div class="usage"><code>(create-query session query)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-execute"><h3>execute</h3><div class="usage"><code>(execute query)</code></div><div class="doc"><pre class="plaintext">Execute the query as a single batch and return the result as a 
single string.  Similar to the `session/execute` function.</pre></div></div><div class="public anchor" id="var-info"><h3>info</h3><div class="usage"><code>(info query)</code></div><div class="doc"><pre class="plaintext">Returns info/status about the query
</pre></div></div><div class="public anchor" id="var-more.3F"><h3>more?</h3><div class="usage"><code>(more? query)</code></div><div class="doc"><pre class="plaintext">Returns an indication if there are any more items left in the queries
result set</pre></div></div><div class="public anchor" id="var-next"><h3>next</h3><div class="usage"><code>(next query)</code></div><div class="doc"><pre class="plaintext">Returns the next result in the result set.  If we are past the end of 
 the results nil will simply be returned. This is a stepped alternative 
to the execute method.</pre></div></div><div class="public anchor" id="var-options"><h3>options</h3><div class="usage"><code>(options query)</code></div><div class="doc"><pre class="plaintext">Returns a string with all query serialization parameters.
</pre></div></div><div class="public anchor" id="var-results"><h3>results</h3><div class="usage"><code>(results query)</code></div><div class="doc"><pre class="plaintext">A more Clojure-y way to walk the result set of the executed query.

Lazily executes the `next` function on the query until the query 
returns nil.  This does not rely on the `more?` method.</pre></div></div><div class="public anchor" id="var-with-query"><h3>with-query</h3><h4 class="type">macro</h4><div class="usage"><code>(with-query bindings &amp; body)</code></div><div class="doc"><pre class="plaintext">Simple macro that allows clean handling of queries. Wraps statements in a
try block that will attempt to close the query in the finally block.

Bindings should start with the query declaration but contain as many
declarations as you need

    (with-query [query (create-query session query-str)]
      (println (basex.query/execute query)))

In the case above the query binding will be available for use in the body
of the form. The query will be closed when the form completes</pre></div></div></div></body></html>