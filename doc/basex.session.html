<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>basex.session documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Basex 0.0.1 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>basex</span></div></div></li><li class="depth-2 branch"><a href="basex.query.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>query</span></div></a></li><li class="depth-2 current"><a href="basex.session.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>session</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="basex.session.html#var-add"><div class="inner"><span>add</span></div></a></li><li class="depth-1"><a href="basex.session.html#var-close"><div class="inner"><span>close</span></div></a></li><li class="depth-1"><a href="basex.session.html#var-create"><div class="inner"><span>create</span></div></a></li><li class="depth-1"><a href="basex.session.html#var-create-session"><div class="inner"><span>create-session</span></div></a></li><li class="depth-1"><a href="basex.session.html#var-execute"><div class="inner"><span>execute</span></div></a></li><li class="depth-1"><a href="basex.session.html#var-info"><div class="inner"><span>info</span></div></a></li><li class="depth-1"><a href="basex.session.html#var-replace"><div class="inner"><span>replace</span></div></a></li><li class="depth-1"><a href="basex.session.html#var-store"><div class="inner"><span>store</span></div></a></li><li class="depth-1"><a href="basex.session.html#var-with-session"><div class="inner"><span>with-session</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">basex.session</h2><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-add"><h3>add</h3><div class="usage"><code>(add session path xml-stream)</code></div><div class="doc"><pre class="plaintext">Adds the XML stream specified by [input] to the currently opened database at
the specified [path]. A document with the same path may occur than once in a
database. If this is unwanted, replace can be used.</pre></div></div><div class="public anchor" id="var-close"><h3>close</h3><div class="usage"><code>(close session)</code></div><div class="doc"><pre class="plaintext">Closes the currently open session.
</pre></div></div><div class="public anchor" id="var-create"><h3>create</h3><div class="usage"><code>(create session name xml-stream)</code></div><div class="doc"><pre class="plaintext">Creates the database name with an input and opens it. An existing database
will be overwritten.</pre></div></div><div class="public anchor" id="var-create-session"><h3>create-session</h3><div class="usage"><code>(create-session)</code><code>(create-session db-spec)</code></div><div class="doc"><pre class="plaintext">Creates a new TCP session to an existing BaseX server. Can be called with or
without a db-spec. If a db-spec is provided it doesn&apos;t need to be complete
as the values will be merged with the default settings:

    { :host     &quot;localhost&quot;
      :port     1984
      :username &quot;admin&quot;
      :password &quot;admin&quot; }

Returns the connected session. Throws IOException if it can&apos;t connect or the
username or password is incorrect.</pre></div></div><div class="public anchor" id="var-execute"><h3>execute</h3><div class="usage"><code>(execute session command output-stream)</code><code>(execute session command)</code></div><div class="doc"><pre class="plaintext">Sends commands to the BaseX server via the provided session. Can be passed
an output stream to collect the server response or, if one is not provided,
it will simply return the server response as a string from the call.</pre></div></div><div class="public anchor" id="var-info"><h3>info</h3><div class="usage"><code>(info session)</code></div><div class="doc"><pre class="plaintext">Shows global information.
</pre></div></div><div class="public anchor" id="var-replace"><h3>replace</h3><div class="usage"><code>(replace session path xml-stream)</code></div><div class="doc"><pre class="plaintext">Replaces a document in the currently opened database, addressed by [path],
with the XML stream specified by [xml-stream], or adds a new document if the
resource does not exist yet.</pre></div></div><div class="public anchor" id="var-store"><h3>store</h3><div class="usage"><code>(store session path blob-stream)</code></div><div class="doc"><pre class="plaintext">Stores a raw file in the opened database to the specified [path]
</pre></div></div><div class="public anchor" id="var-with-session"><h3>with-session</h3><h4 class="type">macro</h4><div class="usage"><code>(with-session bindings &amp; body)</code></div><div class="doc"><pre class="plaintext">Simple macro that allows clean handling of session. Wraps statements in a
try block that will attempt to close the session in the finally block.

Bindings should start with the session declaration but contain as many
declarations as you need

    (with-session [session (basex.session/create-session)
                   query   &quot;xquery 1 to 5&quot;]
      (println (basex.session/execute query)))

In the case above the session and query bindings will be available for use
in the body of the form. The session will be closed when the form completes</pre></div></div></div></body></html>